from absbox.local.china import SPV

#存量产品建模

JY_RMBS_2019_1 = SPV(
    "建元2019年第一期个人住房抵押贷款资产支持证券_2023年第2期（总第47期）"
    ,{"归集日":["2023-01-31","2023-02-28"]
      ,"兑付日":["2023-02-26","2023-03-26"]
      ,"法定到期日":"2042-01-26","收款频率":"月末","付款频率":["每月",26]}
    ,{'发行':{'资产池规模':14_440_020_524.77 }
      ,'日期':"2023-01-31"
      ,'归集表':[["2023-02-28",5659001137,78938368.54,21690167.27]
                ,["2023-03-31",5580205961,78795176.89,21390366.12]
                ,["2023-04-30",5501699571,78506389.22,21091094.77]
                ,["2023-05-31",5423639429,78060142.61,20792903.27]
                ,["2023-06-30",5345896562,77742866.61,20496386.38]
                ,["2023-07-31",5268492053,77404509.23,20201043.17]
                ,["2023-08-31",5191389174,77102878.59,19906965.15]
                ,["2023-09-30",5114589580,76799594.02,19614035.04]
                ,["2023-10-31",5038164900,76424679.85,19322263.99]
                ,["2023-11-30",4961992429,76172471.36,19031919.83]
                ,["2023-12-31",4886056571,75935858.29,18742531.1]
                ,["2024-01-31",4810356682,75699889.13,18454043.21]
                ,["2024-02-29",4735114447,75242234.75,18166471.93]
                ,["2024-03-31",4660629687,74484759.49,17880654.81]
                ,["2024-04-30",4587020593,73609094.91,17597756.53]
                ,["2024-05-31",4514368031,72652561.42,17318226.47]
                ,["2024-06-30",4442609630,71758400.82,17042372.2]
                ,["2024-07-31",4371911020,70698610.58,16769959.72]
                ,["2024-08-31",4302246054,69664965.8,16501616.52]
                ,["2024-09-30",4233249399,68996654.86,16237260.89]
                ,["2024-10-31",4164800302,68449097.4,15975486.05]
                ,["2024-11-30",4096836104,67964197.21,15715815.39]
                ,["2024-12-31",4029476798,67359306.92,15458022.48]
                ,["2025-01-31",3963182447,66294350.35,15202568.31]
                ,["2025-02-28",3898354683,64827763.69,14951227.82]
                ,["2025-03-31",3834974970,63379713.64,14705534.6]
                ,["2025-04-30",3772617801,62357168.53,14465414.25]
                ,["2025-05-31",3711373856,61243944.85,14229247.49]
                ,["2025-06-30",3651247884,60125972.2,13997368.9]
                ,["2025-07-31",3592218900,59028984.09,13769805.05]
                ,["2025-08-31",3534056600,58162300.22,13546465.68]
                ,["2025-09-30",3476752415,57304184.75,13326446.26]
                ,["2025-10-31",3420304555,56447859.87,13109709.47]
                ,["2025-11-30",3364523798,55780757.51,12896225.67]
                ,["2025-12-31",3309383318,55140479.63,12685271.5]
                ,["2026-01-31",3254877768,54505550.67,12476739.69]
                ,["2026-02-28",3201200829,53676938.77,12270602.91]
                ,["2026-03-31",3148023662,53177166.73,12067590.57]
                ,["2026-04-30",3095988455,52035206.73,11866469.9]
                ,["2026-05-31",3044754115,51234340.39,11669612.83]
                ,["2026-06-30",2994357119,50396995.44,11475752.33]
                ,["2026-07-31",2944635654,49721465.87,11285035.64]
                ,["2026-08-31",2895506659,49128994.21,11096844.69]
                ,["2026-09-30",2847002486,48504173.46,10910878.16]
                ,["2026-10-31",2799072912,47929573.91,10727252.83]
                ,["2026-11-30",2751652768,47420143.54,10545773.36]
                ,["2026-12-31",2704549197,47103571.08,10366235.22]
                ,["2027-01-31",2657679790,46869406.94,10187913.8]
                ,["2027-02-28",2611098856,46580934.94,10010484.57]
                ,["2027-03-31",2564735141,46363714.54,9834149.46]
                ,["2027-04-30",2518663039,46072101.72,9658644.62]
                ,["2027-05-31",2472796245,45866794.33,9484259.14]
                ,["2027-06-30",2427142974,45653271.26,9310660.77]
                ,["2027-07-31",2381678059,45464914.91,9137877.89]
                ,["2027-08-31",2336554216,45123843.08,8965811.62]
                ,["2027-09-30",2291880357,44673858.43,8795043.46]
                ,["2027-10-31",2247780458,44099899.52,8625986.07]
                ,["2027-11-30",2204354402,43426055.73,8459102.04]
                ,["2027-12-31",2161742533,42611869.41,8294809.02]
                ,["2028-01-31",2119842740,41899792.42,8133651.35]
                ,["2028-02-29",2078962895,40879845.47,7975235.14]
                ,["2028-03-31",2038634639,40328255.78,7820729.9]
                ,["2028-04-30",1999379054,39255585.14,7668357.33]
                ,["2028-05-31",1960866526,38512527.33,7520146.23]
                ,["2028-06-30",1922887814,37978712.67,7374796.45]
                ,["2028-07-31",1885257884,37629930.2,7231491.87]
                ,["2028-08-31",1847960921,37296962.91,7089532.05]
                ,["2028-09-30",1811317289,36643631.97,6948846.08]
                ,["2028-10-31",1775252130,36065158.82,6810626.65]
                ,["2028-11-30",1739773228,35478902.3,6674574.24]
                ,["2028-12-31",1704697077,35076150.34,6540720.84]
                ,["2029-01-31",1670021626,34675451.3,6408386.9]
                ,["2029-02-28",1636123774,33897851.79,6277557.18]
                ,["2029-03-31",1602810647,33313127.36,6149662.57]
                ,["2029-04-30",1569995801,32814845.94,6023966.35]
                ,["2029-05-31",1537534624,32461177.18,5900170.56]
                ,["2029-06-30",1505487026,32047597.44,5777720.39]
                ,["2029-07-31",1473804812,31682214.48,5656860.9]
                ,["2029-08-31",1442387851,31416960.31,5537406.8]
                ,["2029-09-30",1411187179,31200672.91,5418974.94]
                ,["2029-10-31",1380241044,30946134.98,5301384.85]
                ,["2029-11-30",1349608717,30632326.54,5184773.52]
                ,["2029-12-31",1319331673,30277044.35,5069349.55]
                ,["2030-01-31",1289437687,29893985.78,4955268.16]
                ,["2030-02-28",1260374626,29063060.62,4842632.94]
                ,["2030-03-31",1231941898,28432728.76,4733154.05]
                ,["2030-04-30",1203866501,28075396.35,4626061.05]
                ,["2030-05-31",1176359710,27506791.33,4520327.54]
                ,["2030-06-30",1149193157,27166553.05,4416764.98]
                ,["2030-07-31",1122239930,26953226.41,4314493.62]
                ,["2030-08-31",1095418875,26821055.64,4213043.59]
                ,["2030-09-30",1068729787,26689087.32,4112096.78]
                ,["2030-10-31",1042174949,26554838.03,4011643.85]
                ,["2030-11-30",1015724266,26450683.59,3911694.85]
                ,["2030-12-31",989342010.3,26382255.46,3812141.77]
                ,["2031-01-31",963045123.2,26296887.11,3712844.79]
                ,["2031-02-28",936968837,26076286.2,3613870.79]
                ,["2031-03-31",910991448.8,25977388.26,3515724.05]
                ,["2031-04-30",885166980,25824468.71,3417947.72]
                ,["2031-05-31",859544123.5,25622856.52,3320755.75]
                ,["2031-06-30",834176948.3,25367175.27,3224334.62]
                ,["2031-07-31",809002352.4,25174595.87,3128881.7]
                ,["2031-08-31",783951039.3,25051313.05,3034159.38]
                ,["2031-09-30",759057585.9,24893453.47,2939907.41]
                ,["2031-10-31",734257509.6,24800076.29,2846251.39]
                ,["2031-11-30",709540235.9,24717273.7,2752956.8]
                ,["2031-12-31",684900810.3,24639425.53,2659980.73]
                ,["2032-01-31",660391904,24508906.3,2567311.05]
                ,["2032-02-29",636128186,24263718,2475145.14]
                ,["2032-03-31",612028479.8,24099706.25,2383930.76]
                ,["2032-04-30",588216781.4,23811698.43,2293354.61]
                ,["2032-05-31",564844774.5,23372006.86,2203896.07]
                ,["2032-06-30",541885330.3,22959444.17,2116146.9]
                ,["2032-07-31",519238581.1,22646749.19,2029991.08]
                ,["2032-08-31",496916851,22321730.13,1945031.89]
                ,["2032-09-30",474843924.5,22072926.54,1861316.36]
                ,["2032-10-31",453036423.6,21807500.85,1778545.28]
                ,["2032-11-30",431443195.7,21593227.95,1696785.79]
                ,["2032-12-31",410136263.9,21306931.78,1615851]
                ,["2033-01-31",388962190.5,21174073.37,1536003.83]
                ,["2033-02-28",368132521.3,20829669.18,1456658.89]
                ,["2033-03-31",347560472.7,20572048.6,1378613.56]
                ,["2033-04-30",327267898.2,20292574.55,1301538.81]
                ,["2033-05-31",307598703.7,19669194.46,1225522.75]
                ,["2033-06-30",288907168.2,18691535.54,1151842.63]
                ,["2033-07-31",271830149.7,17077018.48,1081801.16]
                ,["2033-08-31",256327266.8,15502882.9,1017766.12]
                ,["2033-09-30",242229042.5,14098224.34,959574.84]
                ,["2033-10-31",229453801,12775241.51,906627.86]
                ,["2033-11-30",217194428.5,12259372.5,858598.56]
                ,["2033-12-31",205141441.8,12052986.67,812494.1]
                ,["2034-01-31",193236805.1,11904636.69,767170.99]
                ,["2034-02-28",181661043.3,11575761.84,722406.75]
                ,["2034-03-31",170355025.2,11306018.02,678885.22]
                ,["2034-04-30",159342310.4,11012714.88,636397.08]
                ,["2034-05-31",148833155.2,10509155.12,595026.34]
                ,["2034-06-30",138775690.7,10057464.51,555566.77]
                ,["2034-07-31",129115203.3,9660487.43,517833.26]
                ,["2034-08-31",119930133.8,9185069.55,481617.95]
                ,["2034-09-30",111098206.9,8831926.87,447238.58]
                ,["2034-10-31",102550846.3,8547360.54,414216.11]
                ,["2034-11-30",94345498.38,8205347.96,382284.31]
                ,["2034-12-31",86288596.66,8056901.72,351660.36]
                ,["2035-01-31",78295649.44,7992947.22,321603.69]
                ,["2035-02-28",70453948.92,7841700.52,291784.37]
                ,["2035-03-31",62687137.42,7766811.5,262552.78]
                ,["2035-04-30",55122620.21,7564517.21,233616.32]
                ,["2035-05-31",47797201.1,7325419.11,205462.21]
                ,["2035-06-30",40898713.3,6898487.8,178227.91]
                ,["2035-07-31",34583451.71,6315261.59,152586.83]
                ,["2035-08-31",28891378.53,5692073.18,129109.18]
                ,["2035-09-30",23988058.75,4903319.78,107949.54]
                ,["2035-10-31",19826718.05,4161340.7,89723]
                ,["2035-11-30",16336993.2,3489724.85,74247.32]
                ,["2035-12-31",13638442.12,2698551.08,61265.59]
                ,["2036-01-31",11471249.31,2167192.81,51211.12]
                ,["2036-02-29",9719200.84,1752048.47,43133.02]
                ,["2036-03-31",8192764.4,1526436.44,36600.76]
                ,["2036-04-30",6988212.97,1204551.43,30907.13]
                ,["2036-05-31",6167473.59,820739.38,26405.03]
                ,["2036-06-30",5599748.85,567724.74,23331.33]
                ,["2036-07-31",5158909.53,440839.32,21195.77]
                ,["2036-08-31",4753500.79,405408.74,19533.01]
                ,["2036-09-30",4357139.37,396361.42,18003.13]
                ,["2036-10-31",3964110.05,393029.32,16505.36]
                ,["2036-11-30",3608842.48,355267.57,15019.57]
                ,["2036-12-31",3266830.99,342011.49,13678.84]
                ,["2037-01-31",2945911.47,320919.52,12388.64]
                ,["2037-02-28",2632760.78,313150.69,11172.84]
                ,["2037-03-31",2340019.07,292741.71,9987.01]
                ,["2037-04-30",2053746.76,286272.31,8881.67]
                ,["2037-05-31",1784023.75,269723.01,7800.27]
                ,["2037-06-30",1531017.93,253005.82,6780.41]
                ,["2037-07-31",1298150.62,232867.31,5820.19]
                ,["2037-08-31",1125700.36,172450.26,4937.82]
                ,["2037-09-30",992340.38,133359.98,4277.8]
                ,["2037-10-31",871476.19,120864.19,3766.72]
                ,["2037-11-30",754901.11,116575.08,3310.34]
                ,["2037-12-31",650754.84,104146.27,2866.31]
                ,["2038-01-31",560117.12,90637.72,2470.9]
                ,["2038-02-28",470725.32,89391.8,2126.19]
                ,["2038-03-31",383366.83,87358.49,1786.15]
                ,["2038-04-30",299379.56,83987.27,1454.62]
                ,["2038-05-31",220835.61,78543.95,1135.86]
                ,["2038-06-30",155259.3,65576.31,839.05]
                ,["2038-07-31",107823.17,47436.13,587.63]
                ,["2038-08-31",70028.73,37794.44,403.96]
                ,["2038-09-30",39268.21,30760.52,262.35]
                ,["2038-10-31",18035.22,21232.99,144.65]
                ,["2038-11-30",11379.79,6655.43,67.28]
                ,["2038-12-31",9771.75,1608.04,41.72]
                ,["2039-01-31",8157.81,1613.94,35.82]
                ,["2039-02-28",6537.96,1619.85,29.91]
                ,["2039-03-31",4912.17,1625.79,23.97]
                ,["2039-04-30",3280.42,1631.75,18.01]
                ,["2039-05-31",1642.68,1637.74,12.02]
                ,["2039-06-30",0,1642.68,7.08]]
     }
    ,(("本金分账户",{"余额":0})
      ,("收入分账户",{"余额":0}))
    ,(("A1",{"当前余额":0.00
             ,"当前利率":0.032
             ,"初始余额":2_500_000_000_00
             ,"初始利率":0.0
             ,"起息日":"2023-02-26"
             ,"利率":{"固定":0.00}
             ,"债券类型":{"过手摊还":None}})
       ,("A2",{"当前余额":0.00
             ,"当前利率":0.037
             ,"初始余额":3_200_000_000.00
             ,"初始利率":0.0
             ,"起息日":"2023-02-26"
             ,"利率":{"固定":0.00}
             ,"债券类型":{"过手摊还":None}})
       ,("A3",{"当前余额":3_105_524_300.00
             ,"当前利率":0.0405
             ,"初始余额":6_791_000_000.00
             ,"初始利率":0.0
             ,"起息日":"2023-02-26"
             ,"利率":{"浮动":[0.0405,"LPR5Y",-0.0025,["每年",1,1]]}
             ,"债券类型":{"过手摊还":None}})
      ,("次级",{"当前余额":1_949_020_524.77
             ,"当前利率":0.0
             ,"初始余额":1_949_020_524.77
             ,"初始利率":0.0
             ,"起息日":"2023-02-26"
             ,"利率":{"固定":0.00}
             ,"债券类型":{"权益":None}}))
    ,(("增值税",{"类型":{"差额费用":[("*"
                                   ,("资产池累计",None,"利息"),0.0326)
                                   ,("费用支付总额",None,"增值税")]}})
      ,("服务商费用",{"类型":{"年化费率":["资产池余额",0.0012]}})
      ,("报销",{"类型":{"周期费用":["月初",600]}}))
    ,{"未违约":[
        ["支付费用","收入分账户",["服务商费用"],{"应计费用百分比":0.5}]
         ,["支付费用","收入分账户",["报销"],{"应计费用上限":50000}]
         ,["计提支付利息","收入分账户",["A1","A2","A3"]]
         ,["支付费用","收入分账户",["服务商费用"]]
         ,["条件执行"
           ,["状态","加速清偿"]
           ,["账户转移","收入分账户","本金分账户"]]
         ,["账户转移",{"公式": "ABCD" },"收入分账户","本金分账户"]
         ,["支付费用","收入分账户",["报销"]]
         ,["账户转移","收入分账户","本金分账户"]
         ,["支付本金","本金分账户",["A1"]]
         ,["支付本金","本金分账户",["A2"]]
         ,["支付本金","本金分账户",["A3"]]
         ,["条件执行"
           ,[("债券余额","A3"),"=",0]
           ,["支付剩余本金","本金分账户",["A1","A2"]]]
         ,["支付本金","本金分账户",["次级"]]
         ,["支付收益","本金分账户","次级"]]
     ,"回款后":[["计提费用","增值税"]]
     ,"清仓回购":[["出售资产",["正常|违约",1.0,0.0],"本金分账户"]
                ,["账户转移","收入分账户","本金分账户"]
                ,["计提支付利息","本金分账户",["A1","A2","A3"]]
                ,["支付本金","本金分账户",["A1"]] 
                ,["支付本金","本金分账户",["A2"]]
                ,["支付本金","本金分账户",["A3"]]
                ,["支付本金","本金分账户",["次级"]]
                #,["支付费用收益","本金分账户","服务商费用",{"余额百分比":0.7}]
                ,["支付收益","本金分账户","次级"]
                ]}
    ,(["利息回款","收入分账户"]
      ,["本金回款","本金分账户"]
      ,["早偿回款","本金分账户"]
      ,["回收回款","本金分账户"])
    ,None
    ,None
    ,None
    ,None
    ,"摊销"
)